                          ^~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c: In function 'nuevo_schedule':
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:121:20: error: assignment from incompatible pointer type [-Werror=incompatible-pointer-types]
    prev_node->task = &local_state->scheduled;
                    ^
In file included from ./include/linux/list.h:8:0,
                 from ./include/linux/module.h:9,
                 from /home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:1:
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:127:51: error: invalid type argument of '->' (have 'struct list_head')
    next_node = list_entry(&local_state->ghost_node->next, struct fcfs_queue_node,
                                                   ^
./include/linux/kernel.h:836:49: note: in definition of macro 'container_of'
  const typeof( ((type *)0)->member ) *__mptr = (ptr); \
                                                 ^~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:127:16: note: in expansion of macro 'list_entry'
    next_node = list_entry(&local_state->ghost_node->next, struct fcfs_queue_node,
                ^~~~~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:130:13: error: passing argument 1 of 'list_del' from incompatible pointer type [-Werror=incompatible-pointer-types]
    list_del(next_node);
             ^~~~~~~~~
In file included from ./include/linux/module.h:9:0,
                 from /home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:1:
./include/linux/list.h:113:13: note: expected 'struct list_head *' but argument is of type 'struct fcfs_queue_node *'
 extern void list_del(struct list_head *entry);
             ^~~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:150:26: error: 'state' undeclared (first use in this function)
  spin_unlock_irqrestore(&state->queue_lock, flags);
                          ^~~~~
In file included from ./include/uapi/linux/stddef.h:1:0,
                 from ./include/linux/stddef.h:4,
                 from ./include/uapi/linux/posix_types.h:4,
                 from ./include/uapi/linux/types.h:13,
                 from ./include/linux/types.h:5,
                 from ./include/linux/list.h:4,
                 from ./include/linux/module.h:9,
                 from /home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:1:
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c: In function 'nuevo_task_new':
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:168:24: error: 'state' undeclared (first use in this function)
                 BUG_ON(state->scheduled != NULL);
                        ^
./include/asm-generic/bug.h:55:36: note: in expansion of macro 'unlikely'
 #define BUG_ON(condition) do { if (unlikely(condition)) BUG(); } while (0)
                                    ^~~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:168:17: note: in expansion of macro 'BUG_ON'
                 BUG_ON(state->scheduled != NULL);
                 ^~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:173:32: error: 'prev_node' undeclared (first use in this function)
                 list_add_tail(&prev_node->links,&local_state->ghost_node);
                                ^~~~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c: In function 'nuevo_task_exit':
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:190:13: error: 'state' undeclared (first use in this function)
         if (state->scheduled == tsk)
             ^~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c: In function 'demo_task_resume':
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:43:33: error: initialization from incompatible pointer type [-Werror=incompatible-pointer-types]
 #define cpu_state_for(cpu_id)   (&per_cpu(cpu_state, cpu_id))
                                 ^
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:199:46: note: in expansion of macro 'cpu_state_for'
         struct demo_cpu_state *local_state = cpu_state_for(get_partition(tsk));
                                              ^~~~~~~~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:203:62: error: dereferencing pointer to incomplete type 'struct demo_cpu_state'
         printk("CPU [%d] Task woke up at %llu\n", local_state->cpu, ktime_to_ns(ktime_get()));
                                                              ^~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:210:13: error: 'state' undeclared (first use in this function)
         if (state->scheduled != tsk) {
             ^~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:213:32: error: 'prev_node' undeclared (first use in this function)
                 list_add_tail(&prev_node->links,&local_state->ghost_node);
                                ^~~~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:201:14: warning: unused variable 'now' [-Wunused-variable]
         lt_t now;
              ^~~
In file included from ./include/linux/compiler.h:58:0,
                 from ./include/uapi/linux/stddef.h:1,
                 from ./include/linux/stddef.h:4,
                 from ./include/uapi/linux/posix_types.h:4,
                 from ./include/uapi/linux/types.h:13,
                 from ./include/linux/types.h:5,
                 from ./include/linux/list.h:4,
                 from ./include/linux/module.h:9,
                 from /home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:1:
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c: In function 'nuevo_admit_task':
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:224:57: error: invalid type argument of '->' (have 'unsigned int')
                         cpu_state_for(get_partition(tsk)->cpu);
                                                         ^
./include/linux/compiler-gcc.h:53:26: note: in definition of macro 'RELOC_HIDE'
  (typeof(ptr)) (__ptr + (off));     \
                          ^~~
./include/linux/percpu-defs.h:223:2: note: in expansion of macro 'SHIFT_PERCPU_PTR'
  SHIFT_PERCPU_PTR((ptr), per_cpu_offset((cpu)));   \
  ^~~~~~~~~~~~~~~~
./include/linux/percpu-defs.h:223:26: note: in expansion of macro 'per_cpu_offset'
  SHIFT_PERCPU_PTR((ptr), per_cpu_offset((cpu)));   \
                          ^~~~~~~~~~~~~~
./include/linux/percpu-defs.h:256:29: note: in expansion of macro 'per_cpu_ptr'
 #define per_cpu(var, cpu) (*per_cpu_ptr(&(var), cpu))
                             ^~~~~~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:43:35: note: in expansion of macro 'per_cpu'
 #define cpu_state_for(cpu_id)   (&per_cpu(cpu_state, cpu_id))
                                   ^~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:224:25: note: in expansion of macro 'cpu_state_for'
                         cpu_state_for(get_partition(tsk)->cpu);
                         ^~~~~~~~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:224:63: error: expected ')' before ';' token
                         cpu_state_for(get_partition(tsk)->cpu);
                                                               ^
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:226:9: error: expected ';' before '}' token
         }
         ^
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c: At top level:
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:238:31: error: 'nuevo_task_resume' undeclared here (not in a function)
         .task_wake_up       = nuevo_task_resume,
                               ^~~~~~~~~~~~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c: In function 'nuevo_read':
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:246:31: error: conflicting types for 'cpu'
     char kbuf[MAX_SIZE]; char cpu[] = "CPU     NUM_SCUEDULES";
                               ^~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:244:9: note: previous declaration of 'cpu' was here
     int cpu, read = 0;
         ^~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:250:13: warning: passing argument 1 of 'strncpy' makes pointer from integer without a cast [-Wint-conversion]
     strncpy(kbuf[read],&cpu,strlen((const char*)cpu));
             ^~~~
In file included from ./include/linux/bitmap.h:8:0,
                 from ./include/linux/cpumask.h:11,
                 from ./arch/x86/include/asm/cpumask.h:4,
                 from ./arch/x86/include/asm/msr.h:10,
                 from ./arch/x86/include/asm/processor.h:20,
                 from ./arch/x86/include/asm/cpufeature.h:4,
                 from ./arch/x86/include/asm/thread_info.h:52,
                 from ./include/linux/thread_info.h:58,
                 from ./arch/x86/include/asm/preempt.h:6,
                 from ./include/linux/preempt.h:59,
                 from ./include/linux/spinlock.h:50,
                 from ./include/linux/seqlock.h:35,
                 from ./include/linux/time.h:5,
                 from ./include/linux/stat.h:18,
                 from ./include/linux/module.h:10,
                 from /home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:1:
./include/linux/string.h:24:15: note: expected 'char *' but argument is of type 'char'
 extern char * strncpy(char *,const char *, __kernel_size_t);
               ^~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:250:24: error: passing argument 2 of 'strncpy' from incompatible pointer type [-Werror=incompatible-pointer-types]
     strncpy(kbuf[read],&cpu,strlen((const char*)cpu));
                        ^
In file included from ./include/linux/bitmap.h:8:0,
                 from ./include/linux/cpumask.h:11,
                 from ./arch/x86/include/asm/cpumask.h:4,
                 from ./arch/x86/include/asm/msr.h:10,
                 from ./arch/x86/include/asm/processor.h:20,
                 from ./arch/x86/include/asm/cpufeature.h:4,
                 from ./arch/x86/include/asm/thread_info.h:52,
                 from ./include/linux/thread_info.h:58,
                 from ./arch/x86/include/asm/preempt.h:6,
                 from ./include/linux/preempt.h:59,
                 from ./include/linux/spinlock.h:50,
                 from ./include/linux/seqlock.h:35,
                 from ./include/linux/time.h:5,
                 from ./include/linux/stat.h:18,
                 from ./include/linux/module.h:10,
                 from /home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:1:
./include/linux/string.h:24:15: note: expected 'const char *' but argument is of type 'char (*)[22]'
 extern char * strncpy(char *,const char *, __kernel_size_t);
               ^~~~~~~
In file included from ./arch/x86/include/asm/cpumask.h:4:0,
                 from ./arch/x86/include/asm/msr.h:10,
                 from ./arch/x86/include/asm/processor.h:20,
                 from ./arch/x86/include/asm/cpufeature.h:4,
                 from ./arch/x86/include/asm/thread_info.h:52,
                 from ./include/linux/thread_info.h:58,
                 from ./arch/x86/include/asm/preempt.h:6,
                 from ./include/linux/preempt.h:59,
                 from ./include/linux/spinlock.h:50,
                 from ./include/linux/seqlock.h:35,
                 from ./include/linux/time.h:5,
                 from ./include/linux/stat.h:18,
                 from ./include/linux/module.h:10,
                 from /home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:1:
./include/linux/cpumask.h:223:13: error: assignment to expression with array type
  for ((cpu) = -1;    \
             ^
./include/linux/cpumask.h:717:36: note: in expansion of macro 'for_each_cpu'
 #define for_each_online_cpu(cpu)   for_each_cpu((cpu), cpu_online_mask)
                                    ^~~~~~~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:253:5: note: in expansion of macro 'for_each_online_cpu'
     for_each_online_cpu(cpu){
     ^~~~~~~~~~~~~~~~~~~
./include/linux/cpumask.h:224:24: warning: passing argument 1 of 'cpumask_next' makes integer from pointer without a cast [-Wint-conversion]
   (cpu) = cpumask_next((cpu), (mask)), \
                        ^
./include/linux/cpumask.h:717:36: note: in expansion of macro 'for_each_cpu'
 #define for_each_online_cpu(cpu)   for_each_cpu((cpu), cpu_online_mask)
                                    ^~~~~~~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:253:5: note: in expansion of macro 'for_each_online_cpu'
     for_each_online_cpu(cpu){
     ^~~~~~~~~~~~~~~~~~~
./include/linux/cpumask.h:188:28: note: expected 'int' but argument is of type 'char *'
 static inline unsigned int cpumask_next(int n, const struct cpumask *srcp)
                            ^~~~~~~~~~~~
./include/linux/cpumask.h:224:9: error: assignment to expression with array type
   (cpu) = cpumask_next((cpu), (mask)), \
         ^
./include/linux/cpumask.h:717:36: note: in expansion of macro 'for_each_cpu'
 #define for_each_online_cpu(cpu)   for_each_cpu((cpu), cpu_online_mask)
                                    ^~~~~~~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:253:5: note: in expansion of macro 'for_each_online_cpu'
     for_each_online_cpu(cpu){
     ^~~~~~~~~~~~~~~~~~~
./include/linux/cpumask.h:225:9: warning: comparison between pointer and integer
   (cpu) < nr_cpu_ids;)
         ^
./include/linux/cpumask.h:717:36: note: in expansion of macro 'for_each_cpu'
 #define for_each_online_cpu(cpu)   for_each_cpu((cpu), cpu_online_mask)
                                    ^~~~~~~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:253:5: note: in expansion of macro 'for_each_online_cpu'
     for_each_online_cpu(cpu){
     ^~~~~~~~~~~~~~~~~~~
./include/linux/cpumask.h:224:38: warning: left-hand operand of comma expression has no effect [-Wunused-value]
   (cpu) = cpumask_next((cpu), (mask)), \
                                      ^
./include/linux/cpumask.h:717:36: note: in expansion of macro 'for_each_cpu'
 #define for_each_online_cpu(cpu)   for_each_cpu((cpu), cpu_online_mask)
                                    ^~~~~~~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:253:5: note: in expansion of macro 'for_each_online_cpu'
     for_each_online_cpu(cpu){
     ^~~~~~~~~~~~~~~~~~~
In file included from ./include/linux/compiler.h:58:0,
                 from ./include/uapi/linux/stddef.h:1,
                 from ./include/linux/stddef.h:4,
                 from ./include/uapi/linux/posix_types.h:4,
                 from ./include/uapi/linux/types.h:13,
                 from ./include/linux/types.h:5,
                 from ./include/linux/list.h:4,
                 from ./include/linux/module.h:9,
                 from /home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:1:
./include/asm-generic/percpu.h:20:44: error: array subscript is not an integer
 #define per_cpu_offset(x) (__per_cpu_offset[x])
                                            ^
./include/linux/compiler-gcc.h:53:26: note: in definition of macro 'RELOC_HIDE'
  (typeof(ptr)) (__ptr + (off));     \
                          ^~~
./include/linux/percpu-defs.h:223:2: note: in expansion of macro 'SHIFT_PERCPU_PTR'
  SHIFT_PERCPU_PTR((ptr), per_cpu_offset((cpu)));   \
  ^~~~~~~~~~~~~~~~
./include/linux/percpu-defs.h:223:26: note: in expansion of macro 'per_cpu_offset'
  SHIFT_PERCPU_PTR((ptr), per_cpu_offset((cpu)));   \
                          ^~~~~~~~~~~~~~
./include/linux/percpu-defs.h:256:29: note: in expansion of macro 'per_cpu_ptr'
 #define per_cpu(var, cpu) (*per_cpu_ptr(&(var), cpu))
                             ^~~~~~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:43:35: note: in expansion of macro 'per_cpu'
 #define cpu_state_for(cpu_id)   (&per_cpu(cpu_state, cpu_id))
                                   ^~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:254:23: note: in expansion of macro 'cpu_state_for'
         local_state = cpu_state_for(cpu);
                       ^~~~~~~~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:255:39: warning: format '%d' expects argument of type 'int', but argument 3 has type 'char *' [-Wformat=]
         read += sprintf(&kbuf[read],"%d\n",cpu);
                                       ^
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:256:17: warning: passing argument 1 of 'strncpy' makes pointer from integer without a cast [-Wint-conversion]
         strncpy(kbuf[read],&cpu,strlen((const char*)sp));
                 ^~~~
In file included from ./include/linux/bitmap.h:8:0,
                 from ./include/linux/cpumask.h:11,
                 from ./arch/x86/include/asm/cpumask.h:4,
                 from ./arch/x86/include/asm/msr.h:10,
                 from ./arch/x86/include/asm/processor.h:20,
                 from ./arch/x86/include/asm/cpufeature.h:4,
                 from ./arch/x86/include/asm/thread_info.h:52,
                 from ./include/linux/thread_info.h:58,
                 from ./arch/x86/include/asm/preempt.h:6,
                 from ./include/linux/preempt.h:59,
                 from ./include/linux/spinlock.h:50,
                 from ./include/linux/seqlock.h:35,
                 from ./include/linux/time.h:5,
                 from ./include/linux/stat.h:18,
                 from ./include/linux/module.h:10,
                 from /home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:1:
./include/linux/string.h:24:15: note: expected 'char *' but argument is of type 'char'
 extern char * strncpy(char *,const char *, __kernel_size_t);
               ^~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:256:28: error: passing argument 2 of 'strncpy' from incompatible pointer type [-Werror=incompatible-pointer-types]
         strncpy(kbuf[read],&cpu,strlen((const char*)sp));
                            ^
In file included from ./include/linux/bitmap.h:8:0,
                 from ./include/linux/cpumask.h:11,
                 from ./arch/x86/include/asm/cpumask.h:4,
                 from ./arch/x86/include/asm/msr.h:10,
                 from ./arch/x86/include/asm/processor.h:20,
                 from ./arch/x86/include/asm/cpufeature.h:4,
                 from ./arch/x86/include/asm/thread_info.h:52,
                 from ./include/linux/thread_info.h:58,
                 from ./arch/x86/include/asm/preempt.h:6,
                 from ./include/linux/preempt.h:59,
                 from ./include/linux/spinlock.h:50,
                 from ./include/linux/seqlock.h:35,
                 from ./include/linux/time.h:5,
                 from ./include/linux/stat.h:18,
                 from ./include/linux/module.h:10,
                 from /home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:1:
./include/linux/string.h:24:15: note: expected 'const char *' but argument is of type 'char (*)[22]'
 extern char * strncpy(char *,const char *, __kernel_size_t);
               ^~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:264:9: error: implicit declaration of function 'copy_to_user' [-Werror=implicit-function-declaration]
     if (copy_to_user(buf, kbuf, read) > 0) return -EFAULT;
         ^~~~~~~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c: At top level:
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:271:14: error: variable 'fops' has initializer but incomplete type
 const struct file_operations fops = {.read = nuevo_read,};
              ^~~~~~~~~~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:271:38: error: unknown field 'read' specified in initializer
 const struct file_operations fops = {.read = nuevo_read,};
                                      ^
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:271:46: warning: excess elements in struct initializer
 const struct file_operations fops = {.read = nuevo_read,};
                                              ^~~~~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:271:46: note: (near initialization for 'fops')
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c: In function 'init_nuevo':
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:277:30: error: implicit declaration of function 'proc_create' [-Werror=implicit-function-declaration]
         if ((my_proc_entry = proc_create("fcfs_althm", 0666, NULL, &fops)) == NULL){
                              ^~~~~~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:277:28: warning: assignment makes pointer from integer without a cast [-Wint-conversion]
         if ((my_proc_entry = proc_create("fcfs_althm", 0666, NULL, &fops)) == NULL){
                            ^
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c: In function 'exit_nuevo':
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:296:5: error: implicit declaration of function 'remove_proc_entry' [-Werror=implicit-function-declaration]
     remove_proc_entry("fcfs_althm", NULL);
     ^~~~~~~~~~~~~~~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c: At top level:
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:271:30: error: storage size of 'fops' isn't known
 const struct file_operations fops = {.read = nuevo_read,};
                              ^~~~
/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.c:196:13: warning: 'demo_task_resume' defined but not used [-Wunused-function]
 static void demo_task_resume(struct task_struct  *tsk) {
             ^~~~~~~~~~~~~~~~
cc1: some warnings being treated as errors
make[2]: *** [/home/bench/Carlos/plugins/plugin_sketch/plugin_nuevo.o] Error 1
make[1]: *** [_module_/home/bench/Carlos/plugins/plugin_sketch] Error 2
make: *** [all] Error 2
